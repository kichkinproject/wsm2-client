<loader [complete]="completed|async" text="Загрузка"></loader>
<div class="wsm-data-container">
  <h2 align="center">Создание сценария</h2>
  <div class="block-container" *ngIf="accessed">
    <div class="entity-block">
      <div class="scrolling-container">
        <div class="scrolling-area">
          <div class="name">
            <label>
              Название сценария:
              <input [(ngModel)]="name" placeholder='Название сценария'>
              <span *ngIf="!checkName()">Не правильный формат ввода названия сценария</span>
            </label>
          </div>
          <div class="desc">
            <label>
              Описание сценария:
              <input [(ngModel)]="description" placeholder='Описание сценария'>
              <span *ngIf="!checkDesc()">Не правильный формат ввода описания сценария</span>
            </label>
          </div>
          <div class="parents">
            <label>
              Тип сценария:
              <div class="updating-field">
                <select [(ngModel)]="selectedType">
                  <option *ngFor="let t of scTypes" [ngValue]="t.value">
                    {{ t.value }}
                  </option>
                </select>
              </div>
            </label>
          </div>
          <!--<div class="scenario-publicity">-->
          <!--<label>-->
          <!--Доступность сценария:-->
          <!--<mat-radio-button [(ngModel)]="publicity"></mat-radio-button>-->
          <!--</label>-->
          <!--</div>-->
          <div class="script">
            <label>
              Код сценария:
              <div>
                <div id="blocklyDiv" style="height: 440px; width: 1000px;"></div>
                <xml id="toolbox" #toolbox style="display: none">
                  <category name="Логика">
                    <category name="Условия">
                      <block type="controls_if"></block>
                      <block type="controls_if_if"></block>
                      <block type="controls_if_elseif"></block>
                      <block type="controls_if_else"></block>
                    </category>
                    <category name="Сравнения">
                      <block type="logic_compare"></block>
                      <block type="logic_operation"></block>
                      <block type="logic_negate"></block>
                      <block type="logic_boolean"></block>
                      <block type="logic_null"></block>
                      <block type="logic_ternary"></block>
                    </category>
                  </category>
                  <category name="Математические операции">
                    <block type="math_number"></block>
                    <block type="math_arithmetic"></block>
                    <block type="math_single"></block>
                    <block type="math_trig"></block>
                    <block type="math_constant"></block>
                    <block type="math_number_property"></block>
                    <block type="math_change"></block>
                    <block type="math_round"></block>
                    <block type="math_on_list"></block>
                    <block type="math_modulo"></block>
                    <block type="math_constrain"></block>
                    <block type="math_random_int"></block>
                    <block type="math_random_float"></block>
                  </category>
                  <category name="Текст">
                    <block type="text"></block>
                    <block type="text_join"></block>
                    <block type="text_create_join_container"></block>
                    <block type="text_create_join_item"></block>
                    <block type="text_append"></block>
                    <block type="text_length"></block>
                    <block type="text_isEmpty"></block>
                    <block type="text_indexOf"></block>
                    <block type="text_charAt"></block>
                    <block type="text_getSubstring"></block>
                    <block type="text_changeCase"></block>
                    <block type="text_trim"></block>
                    <block type="text_print"></block>
                    <block type="text_prompt_ext"></block>
                    <block type="text_prompt"></block>
                  </category>
                  <category name="Списки">
                    <block type="lists_create_empty"></block>
                    <block type="lists_create_with"></block>
                    <block type="lists_create_with_container"></block>
                    <block type="lists_create_with_item"></block>
                    <block type="lists_repeat"></block>
                    <block type="lists_length"></block>
                    <block type="lists_isEmpty"></block>
                    <block type="lists_indexOf"></block>
                    <block type="lists_getIndex"></block>
                    <block type="lists_setIndex"></block>
                    <block type="lists_getSublist"></block>
                    <block type="lists_sort"></block>
                    <block type="lists_split"></block>
                  </category>
                  <category name="Циклы">
                    <block type="controls_repeat_ext"></block>
                    <block type="controls_repeat"></block>
                    <block type="controls_whileUntil"></block>
                    <block type="controls_for"></block>
                    <block type="controls_forEach"></block>
                    <block type="controls_flow_statements"></block>
                  </category>
                  <category name="Цвета">
                    <block type="colour_picker"></block>
                    <block type="colour_random"></block>
                    <block type="colour_rgb"></block>
                    <block type="colour_blend"></block>
                  </category>
                  <category name="Переменные">
                    <block type="variables_get"></block>
                    <block type="variables_set"></block>
                  </category>
                </xml>
              </div>
            </label>
          </div>
        </div>
      </div>
    </div>
    <button mat-icon-button [disabled]="!enabledToAdd" (click)="createScenario()">
      <mat-icon>save</mat-icon>
    </button>
  </div>
  <div class="accessed" *ngIf="!accessed">Нет доступа к странице "Создание сценариев"</div>
</div>
